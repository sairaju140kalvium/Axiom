<!DOCTYPE html>
<html>
<head>
<title>Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#f1f3f6;
  --card:#ffffff;
  --text:#000;
  --header:#667eea;
}
.dark{
  --bg:#020617;
  --card:#0f172a;
  --text:#f8fafc;
  --header:#0ea5e9;
}

*{
  box-sizing:border-box;
}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto;
  background:var(--bg);
  color:var(--text);
}

/* Header */
.header{
  background:var(--header);
  color:white;
  padding:14px 16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  position:sticky;
  top:0;
  z-index:20;
}

.header span{
  font-size:16px;
  font-weight:600;
}

/* Toggle */
.toggle{
  background:white;
  color:black;
  border:none;
  padding:8px 14px;
  border-radius:999px;
  font-size:14px;
}

/* Controls */
.controls{
  position:sticky;
  top:56px;
  background:var(--card);
  padding:10px;
  display:flex;
  gap:8px;
  z-index:15;
}

.controls input,
.controls select{
  flex:1;
  padding:12px;
  font-size:15px;
  border-radius:12px;
  border:1px solid #cbd5e1;
}

/* Chart */
.chart{
  margin:12px;
  padding:16px;
  background:var(--card);
  border-radius:16px;
}

.chart b{
  font-size:15px;
}

.bar{
  height:16px;
  background:#22c55e;
  border-radius:999px;
  width:0;
  transition:width 0.8s ease;
}
.bar.premium{
  background:#3b82f6;
}

.label{
  font-size:14px;
  margin:8px 0 6px;
}

/* Cards */
.container{
  padding:12px;
}

.card{
  background:var(--card);
  border-radius:18px;
  padding:16px;
  margin-bottom:14px;
  box-shadow:0 10px 20px rgba(0,0,0,0.08);
}

.card input,
.card select{
  width:100%;
  padding:12px;
  font-size:15px;
  margin-top:10px;
  border-radius:12px;
  border:1px solid #cbd5e1;
}

/* Buttons */
.btns{
  display:flex;
  gap:10px;
  margin-top:14px;
}

.save{
  flex:1;
  background:#22c55e;
  color:white;
  border:none;
  padding:12px;
  font-size:15px;
  border-radius:12px;
}

.delete{
  flex:1;
  background:#ef4444;
  color:white;
  border:none;
  padding:12px;
  font-size:15px;
  border-radius:12px;
}

/* Desktop enhancement */
@media(min-width:768px){
  .container{
    max-width:720px;
    margin:auto;
  }
}
</style>
</head>

<body id="body">

<div class="header">
  <span>Hi Sai Raju Sir ðŸ‘‹</span>
  <button class="toggle" onclick="toggleMode()">ðŸŒ™</button>
</div>

<div class="controls">
  <input id="search" placeholder="Search user..." onkeyup="render()">
  <select id="filter" onchange="render()">
    <option value="">All</option>
    <option value="General">General</option>
    <option value="Premium">Premium</option>
  </select>
</div>

<div class="chart">
  <b>User Categories</b>

  <div class="label">General: <span id="gCount"></span></div>
  <div class="bar" id="gBar"></div>

  <div class="label" style="margin-top:12px;">Premium: <span id="pCount"></span></div>
  <div class="bar premium" id="pBar"></div>
</div>

<div class="container" id="list"></div>

<script>
if(localStorage.getItem("loggedIn")!=="true"){
  location.href="login.html";
}

let users = JSON.parse(localStorage.getItem("users")) || [];
let list = document.getElementById("list");

/* Dark mode */
if(localStorage.getItem("mode")==="dark"){
  body.classList.add("dark");
}
function toggleMode(){
  body.classList.toggle("dark");
  localStorage.setItem("mode",
    body.classList.contains("dark")?"dark":"light"
  );
}

/* Charts */
function chart(){
  let g = users.filter(u=>u.category=="General").length;
  let p = users.filter(u=>u.category=="Premium").length;
  let total = g+p || 1;

  gCount.innerText = g;
  pCount.innerText = p;

  gBar.style.width = (g/total*100)+"%";
  pBar.style.width = (p/total*100)+"%";
}

/* Render users */
function render(){
  let s = search.value.toLowerCase();
  let f = filter.value;
  list.innerHTML="";

  users.forEach((u,i)=>{
    let text=(u.name+u.mobile+u.skills+u.place).toLowerCase();
    if(!text.includes(s)) return;
    if(f && u.category!==f) return;

    list.innerHTML+=`
    <div class="card">
      <input value="${u.name}" onchange="users[${i}].name=this.value">
      <input value="${u.mobile}" onchange="users[${i}].mobile=this.value">
      <input value="${u.age}" onchange="users[${i}].age=this.value">

      <select onchange="users[${i}].gender=this.value">
        <option ${u.gender=="Male"?"selected":""}>Male</option>
        <option ${u.gender=="Female"?"selected":""}>Female</option>
        <option ${u.gender=="Other"?"selected":""}>Other</option>
      </select>

      <input value="${u.qualification}" onchange="users[${i}].qualification=this.value">
      <input value="${u.skills}" onchange="users[${i}].skills=this.value">
      <input value="${u.place}" onchange="users[${i}].place=this.value">

      <select onchange="users[${i}].category=this.value">
        <option ${u.category=="General"?"selected":""}>General</option>
        <option ${u.category=="Premium"?"selected":""}>Premium</option>
      </select>

      <div class="btns">
        <button class="save" onclick="save()">Save</button>
        <button class="delete" onclick="remove(${i})">Delete</button>
      </div>
    </div>
    `;
  });
}

/* Save & delete */
function save(){
  localStorage.setItem("users",JSON.stringify(users));
  chart();
  alert("Updated successfully");
}
function remove(i){
  if(confirm("Delete this user?")){
    users.splice(i,1);
    localStorage.setItem("users",JSON.stringify(users));
    render();
    chart();
  }
}

render();
chart();
</script>

</body>
</html>